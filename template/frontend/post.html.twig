{% extends "base.html.twig" %}

{% block title %}Liste des posts{% endblock %}

{% block body %}
<section>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>{{ post.title|convert_encoding('UTF-8', 'ISO-8859-1') }} <br/> {{ post.dateCreate|date("m - d - Y") }}</h2>
                <hr/>
            </div>
            <div class="col-lg-12">
                <p><b>{{ post.chapo|convert_encoding('UTF-8', 'ISO-8859-1')|nl2br }}</b></p>
                <p>{{ post.content|convert_encoding('UTF-8', 'ISO-8859-1')|nl2br }}</p>
            </div>
        </div>
    </div>
</section>
<section class="comments">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Liste des commentaires
            </div>
            <div class="col-lg-12">
            {% if comments %}
                {% for comment in comments %}
                    <hr/>
                    <h4>Par {{ comment.pseudo|convert_encoding('UTF-8', 'ISO-8859-1') }} - {{ comment.dateCreate|date("m/d/Y") }}</h4>
                    <p>{{ comment.content|convert_encoding('UTF-8', 'ISO-8859-1') }}</p>
                    {% if comment.user_idUser == session.idUser %}                    
                        <p><a href="/modifycomment-{{ comment.id }}">Modifier</a> - 
                        <a href="/deletecomment-{{ comment.id }}" onclick="return confirm('Etes-vous sûr ?')">Supprimer</a></p>
                    {% endif %}
                {% endfor %}
            {% else %}
                <hr/>
                <p>A venir bientôt ...</p>
            {% endif %}
            </div>
            <div class="col-lg-12">
                <hr/>
                <h2>Ajouter un commentaire</h2>
                {% if session.connected %}
                    {% include('frontend/commentForm.html.twig') %}
                {% else %}
                    <p>Vous devez être connecté pour poster un commentaire.</p>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}
